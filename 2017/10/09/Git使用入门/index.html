<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"xuranus.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="本文主要是复现一遍廖雪峰的Git教程中的操作，初学Git强烈建议阅读这篇教程！  安装与配置安装Git Linux下的安装:  ArchLinux: sudo pacman -S git Debian: sudo apt-get install git 特别老的Linux: sudo apt install git-core   Win&#x2F;Mac的安装可以去Git官网下载安装包。   配置安装完成">
<meta property="og:type" content="article">
<meta property="og:title" content="Git使用入门">
<meta property="og:url" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/index.html">
<meta property="og:site_name" content="XUranus">
<meta property="og:description" content="本文主要是复现一遍廖雪峰的Git教程中的操作，初学Git强烈建议阅读这篇教程！  安装与配置安装Git Linux下的安装:  ArchLinux: sudo pacman -S git Debian: sudo apt-get install git 特别老的Linux: sudo apt install git-core   Win&#x2F;Mac的安装可以去Git官网下载安装包。   配置安装完成">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_094129.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_094556.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_095643.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_101532.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_101858.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_104111.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_104731.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_105241.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_110434.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_110724.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_102229.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_110826.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_102935.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_120222.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_120953.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_121154.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_085110.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_144711.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_154912.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_160029.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_160207.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_160410.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201103_204649.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201103_204051.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201103_204954.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201103_220940.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201103_221403.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201103_210113.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201103_212445.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201103_213203.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201104_210806.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201104_210852.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201104_211035.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201104_211151.png">
<meta property="og:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_132928.png">
<meta property="article:published_time" content="2017-10-08T20:02:26.000Z">
<meta property="article:modified_time" content="2022-07-09T06:53:00.757Z">
<meta property="article:author" content="XUranus">
<meta property="article:tag" content="Git">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/Screenshot_20201027_094129.png">

<link rel="canonical" href="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Git使用入门 | XUranus</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">XUranus</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">常应常静，常清净矣</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags" rel="section"><i class="tags fa-fw"></i>标签<span class="badge">56</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories" rel="section"><i class="th fa-fw"></i>分类<span class="badge">6</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives" rel="section"><i class="archive fa-fw"></i>归档<span class="badge">125</span></a>

  </li>
        <li class="menu-item menu-item-plan">

    <a href="/plan" rel="section"><i class="plane fa-fw"></i>计划</a>

  </li>
        <li class="menu-item menu-item-friends">

    <a href="/friends" rel="section"><i class="star fa-fw"></i>友链</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about" rel="section"><i class="user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-sticky">

    <a href="/sticky" rel="section"><i class="sitemap fa-fw"></i>便签</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/march72.jpg">
      <meta itemprop="name" content="XUranus">
      <meta itemprop="description" content="Blog of XUranus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XUranus">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Git使用入门
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-10-08 20:02:26" itemprop="dateCreated datePublished" datetime="2017-10-08T20:02:26Z">2017-10-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-07-09 06:53:00" itemprop="dateModified" datetime="2022-07-09T06:53:00Z">2022-07-09</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/10/09/Git使用入门/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>13k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>12 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <blockquote>
<p>本文主要是复现一遍<a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/896043488029600">廖雪峰的Git教程</a>中的操作，初学Git强烈建议阅读这篇教程！</p>
</blockquote>
<h2 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h2><h3 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h3><ol>
<li><p>Linux下的安装:</p>
<ul>
<li>ArchLinux: <code>sudo pacman -S git</code></li>
<li>Debian: <code>sudo apt-get install git</code></li>
<li>特别老的Linux: <code>sudo apt install git-core</code></li>
</ul>
</li>
<li><p>Win/Mac的安装可以去<a target="_blank" rel="noopener" href="https://git-scm.com/">Git官网</a>下载安装包。</p>
</li>
</ol>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>安装完成后，还需要进一步设置，首先配置用户名邮箱：<br><code>git config --global user.name &quot;your name</code><br><code>git config --global user.email &quot;email@example.com</code></p>
<p><code>--global</code>参数表示全局配置：你这台机器上所有的Git仓库都会使用这个配置。</p>
<p>对于全局配置Git将其保存在Linux的<code>$HOME/.gitconfig</code>以及Windows的<code>%GIT%/etc/gitconfig</code>下，而具体项目的Git配置则位于项目的<code>.git/config</code>下。可以直接在配置文件中查看和修改当前Git的配置。</p>
<span id="more"></span>
<h2 id="创建版本库"><a href="#创建版本库" class="headerlink" title="创建版本库"></a>创建版本库</h2><p>版本库又称Repository，接下来以在本地创建一个新项目”learngit”为例，展现创建版本库的过程：</p>
<ol>
<li>创建一个目录<br><code>mkdir learngit</code>  </li>
<li>初始化git仓库<br>进入目录：<code>cd learngit</code>，在目录下初始化Git仓库：<code>git init</code>，此时会在目录下自动生成一个<code>.git</code>隐藏文件夹，这就是本地的版本库。</li>
<li>创建文件<br><code>echo &quot;this is a README file&quot; &gt; README.md</code></li>
<li>把文件添加到Git仓库<br><code>git add README.md</code>  </li>
<li>把位于暂存区的文件提交到Git仓库，-m后写上本次提交的说明（改动记录）<br><code>git commit -m &quot;first commit&quot;</code></li>
</ol>
<p>创建Git版本库时，Git自动为我们创建了唯一一个<code>master</code>分支，所以现在<code>git commit</code>就是默认往<code>master</code>分支上提交更改。</p>
<h2 id="版本控制"><a href="#版本控制" class="headerlink" title="版本控制"></a>版本控制</h2><p>每当文件修改到一定程度的时候，就可以“保存一个快照”，这个快照在Git中被称为commit。当想回滚到某个历史版本时就可以从一个commit恢复，然后继续工作。</p>
<p>加入我们要修改一个文件为2.0版本：<br><code>echo &quot;this is a README file v2.0&quot; &gt; README.md</code><br>重新add：<br><code>git add README.md</code><br>再次commit：<br><code>git commit -m &quot;edit version to v2.0&quot;</code><br>之后又进行了一次更新，改为3.0版本，再来一次上述操作：<br><code>echo &quot;this is a README file v3.0&quot; &gt; README.md</code><br><code>git add README.md</code><br><code>git commit -m &quot;edit version to v3.0&quot;</code> </p>
<p>此时连同第一次一共完成了三次commit，可以使用<code>git log</code>查看这三次commit记录：<br><img src="Screenshot_20201027_094129.png" alt=""></p>
<p>也可以用<code>git log --pretty=oneline</code>来简洁的显示</p>
<p><img src="Screenshot_20201027_094556.png" alt=""></p>
<p>其中的hash码是SHA1计算出的commit id。<code>HEAD</code>指向最近的一次的commit，分支为<code>master</code>。上一个版本就是<code>HEAD^</code>，上上一个版本就是<code>HEAD^^</code>，以此类推。当然往上100个版本写100个<code>^</code>比较容易数不过来，所以写成<code>HEAD~100</code>。使用<code>HEAD</code>参照就可以定位之前某次提交的记录。</p>
<h3 id="回退到上一个版本"><a href="#回退到上一个版本" class="headerlink" title="回退到上一个版本"></a>回退到上一个版本</h3><p>如果一个版本写出了重大BUG/设计缺陷想放弃这个版本，亦或是误删了上个版本的文件，可以使用版本回退来回到过去。例如回到上一个版本：<br><code>git reset --hard HEAD^</code><br>此时<code>cat README.md</code>可以看到：<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ cat README.md</span><br><span class="line">this is README.md file v2.0</span><br></pre></td></tr></table></figure><br>说明已经回到了上一次commit的版本了。如果此时<code>git log</code>则会发现<code>HEAD</code>指针已经指向了第二次提交的结果。</p>
<p><img src="Screenshot_20201027_095643.png" alt=""></p>
<h3 id="撤销到未来的版本"><a href="#撤销到未来的版本" class="headerlink" title="撤销到未来的版本"></a>撤销到未来的版本</h3><p>如果想再次回到未来，由于用<code>HEAD</code>无法定位未来的版本，则需要未来版本的commit id。此时<code>git log</code>可以看到上次最新的commit已经消失，想要回到未来则需要未来版本的commit id来定位:<code>git reset --hard 4419908</code>，commit id只需要输入前几位，然后按<code>Tab</code> Git会自动补全。</p>
<p>为了防止找不到过去的commit id，Git提供了一个命令<code>git reflog</code>用来记录你的每一次命令。</p>
<h3 id="比较文件区别"><a href="#比较文件区别" class="headerlink" title="比较文件区别"></a>比较文件区别</h3><p>把<code>README.md</code>中的内容改成如下<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software distributed under the GPL.</span><br></pre></td></tr></table></figure><br>然后执行一次commit，再次修改，在文件头部加两行：<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Learn Git</span><br><span class="line">I&#x27;m writing this README.md to learn Git.</span><br><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software distributed under the GPL.</span><br></pre></td></tr></table></figure><br>再次commit。两次修改可以看到被修改的文件数，增加和删除的行。Git才有一种近似LCS的文件diff算法。<br><img src="Screenshot_20201027_101532.png" alt=""></p>
<p>用<code>git diff HEAD^ -- README.md</code>命令可以查看工作区和版本库里面版本的区别：<br><img src="Screenshot_20201027_101858.png" alt=""></p>
<p>扩展知识：</p>
<blockquote>
<ul>
<li><code>git diff &lt;branch1&gt; &lt;branch2&gt;</code> 查看分支区别</li>
<li><code>git diff &lt;branch1&gt;..&lt;branch2&gt; --name-status</code> 查看分支差异（只查看文件列表）</li>
<li><code>git diff --cached</code> 查看暂存区文件和上次提交的区别</li>
<li><code>git diff &lt;path&gt; &lt;origin/path&gt;</code> 查看本地文件和远端文件的区别</li>
</ul>
</blockquote>
<h3 id="工作区与暂存区"><a href="#工作区与暂存区" class="headerlink" title="工作区与暂存区"></a>工作区与暂存区</h3><p><code>git add &lt;file&gt;</code>操作可以进行多次，<code>git add .</code>可以add当前目录下所有的文件。</p>
<p>修改后没有add的文件位于<strong>工作区（working tree）</strong>，被add后的文件会被存入<strong>暂存区（stage）</strong>。使用<code>git status</code>可以查看暂存区文件的状态。</p>
<p>首先<code>git status</code><br><img src="Screenshot_20201027_104111.png" alt=""><br>可以看到当前<code>nothing to commit,working tree clean</code>，说明工作区内文件和最新的<code>HEAD</code>指向的快照一致，并且暂存区为空，无需commit。</p>
<p>然后在<code>READMD.md</code>中写入新的一行：<code>echo &quot;Git has a stage zone&quot; &gt;&gt; README.md</code>,再次<code>git status</code><br><img src="Screenshot_20201027_104731.png" alt=""><br>可以看到<code>Changes not staged for commit</code>，此时暂存区为空，说明工作区的<code>README.md</code>和<code>HEAD</code>指向的版本库中的对比不符，且没有被暂存。此时<code>git add README.md</code>则会把工作区新的<code>README.md</code>推入暂存区，再次<code>git status</code><br><img src="Screenshot_20201027_105241.png" alt=""><br>可以看到<code>Changes to be Committed</code>，并且文件高亮为绿色，说明暂存区的<code>README.md</code>和工作区的<code>READMD.md</code>已经保持一致，但是和<code>HEAD</code>指向的本地库中的还不一致，需要被commit。</p>
<p>此时如果再次修改<code>README.md</code>，则和工作区的<code>README.md</code>又不一致，<code>git status</code>中的信息又会变成<code>Changed not staged for commit</code>。再次<code>git add READMD.md</code>解决。</p>
<p>此时不忙commit，先创建一个新的文件<code>LICENCE</code>，然后<code>git status</code><br><img src="Screenshot_20201027_110434.png" alt=""><br>出现了新的状态<code>Untracked files</code>，说明<code>LICENCE</code>从没有被add过，需要被add</p>
<p>添加<code>LICENCE</code>文件：<code>git add LICENCE</code><br><img src="Screenshot_20201027_110724.png" alt=""><br>此时所有文件都变成了绿色，可以执行commit了。此时暂存区的状态如下：<br><img src="Screenshot_20201027_102229.png" alt=""></p>
<p>执行commit后，看到暂存区被清空，再次显示<code>nothing to commit,working tree clean</code><br><img src="Screenshot_20201027_110826.png" alt=""></p>
<p><code>HEAD</code>纸箱了commit开辟的新的节点，工作区域和<code>HEAD</code>指向的新的快照保持了一致，此时所有区的状态如下<br><img src="Screenshot_20201027_102935.png" alt=""></p>
<p>总之：Git就是add工作区文件到暂存区暂存，再commit一次会提交所有暂存区的文件，<strong>修改后还没有被add进暂存区的文件不会被commit</strong>。</p>
<h3 id="撤销修改"><a href="#撤销修改" class="headerlink" title="撤销修改"></a>撤销修改</h3><p>如果写错了文件，或者误删了文件，首先想到的就是用<code>git reset</code>切换到之前的版本，但是如果只是写错了一个文件，这种大面积的回退就得不偿失。</p>
<p>命令<code>git checkout -- README.md</code>意思就是，把<code>README.md</code>文件在工作区的修改全部撤销，这里有两种情况：</p>
<ul>
<li><code>README.md</code>自从修改后还没有被放到暂存区，现在撤销修改就回到和版本库一模一样的状态；</li>
<li><code>README.md</code>已经添加到暂存区后，又作了修改，现在撤销修改就回到添加到暂存区后的状态。</li>
</ul>
<p>即<code>git checkout -- &lt;file&gt;</code>会先从暂存区找文件，找到了就用暂存区文件替代，找不到就用最新版本库中的替代。</p>
<blockquote>
<ul>
<li><code>git checkout -- &lt;file&gt;</code>命令中的<code>--</code>很重要，没有<code>--</code>，就变成了“切换到另一个分支”的意思。新版本Git还提供了<code>git restore &lt;filename&gt;</code>的命令用于避免<code>git checkout</code>切换分支的歧义，建议尽量使用<code>git restore</code>。</li>
<li>慎用<code>git checkout .</code>，它删除一切unstaged的工作区修改，没有任何办法恢复！！！</li>
</ul>
</blockquote>
<p>如果不仅写错了文件还add到了暂存区：用命令<code>git reset HEAD README.md</code>或者<code>git restore --staged README.md</code>可以把暂存区的修改撤销掉（unstage）。<code>git reset</code>命令既可以回退版本，也可以把暂存区的修改回退到工作区。当我们用<code>HEAD</code>表示最新的版本。由于此时工作区还没有撤销更改，再次使用<code>git checkout -- README.md</code>。</p>
<p>如果不但改错了东西，还从暂存区提交到了版本库，可以用<code>git reset --hard ^HEAD</code>回退到上一个版本。</p>
<p>如果不但该错了东西，还提交到了版本库，并push到了远程库，那就只能本地回退，然后<code>git push -f</code>了。（但还是会在远程留下记录）</p>
<h3 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h3><p>Git知道你删除了文件，因此，工作区和版本库就不一致了，<code>git status</code>命令会立刻告诉你哪些文件被删除了：<br><img src="Screenshot_20201027_120222.png" alt=""><br>此时如果你是误删，用<code>git checkout -- README.md</code>即可恢复。</p>
<p>如果你是真的要从版本库删除文件，就用<code>git rm README.md</code>删掉版本库中的文件，并commit。</p>
<p>如果用<code>git rm README.md</code>，会删除工作区<code>READMD.md</code>并上报给暂存区，此时使用<code>git checkout -- README.md</code>是无法恢复文件的。<br><img src="Screenshot_20201027_120953.png" alt=""><br>这种情况下想要恢复文件，就要取消删除操作的暂存，然后<code>git checkout -- README.md</code>恢复。（可以<code>git status</code>看提示如何操作）<br><img src="Screenshot_20201027_121154.png" alt=""></p>
<blockquote>
<p>从来没有被添加到版本库就被删除的文件，是无法恢复的！所以在IDEA等IDE中开发时，创建新文件一定要开启“默认立即添加到本地仓库中”！</p>
</blockquote>
<h2 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h2><h3 id="远程创建一个新的项目"><a href="#远程创建一个新的项目" class="headerlink" title="远程创建一个新的项目"></a>远程创建一个新的项目</h3><p>如果从头创建一个新的项目，可以在github中创建一个新的Repository如”learngit”，并勾选<code>Add a README file</code>来初始化一个<code>README.md</code>文件。<br><img src="Screenshot_20201027_085110.png" alt=""><br>然后把创建的repo clone到本地：<code>git clone git@github.com:XUranus/learngit.git</code>。</p>
<p>克隆后的文件夹里已经包含了<code>.git</code>文件夹和<code>README.md</code>，完成了本地库的创建。</p>
<h3 id="为本地项目添加远程库"><a href="#为本地项目添加远程库" class="headerlink" title="为本地项目添加远程库"></a>为本地项目添加远程库</h3><p>如果本地已经开始了一个项目，则GitHub上创建新项目不需要初始化<code>README.md</code>，它会创建一个完全为空的repo。在本地项目根目录按照如下步骤进行，则完成第一次commit。</p>
<p><code>git init</code><br><code>git add README.md</code><br><code>git commit -m &quot;first commit&quot;</code><br><code>git remote add origin git@github.com:XUranus/learngit.git</code><br><code>git push -u origin master</code></p>
<p>其中<code>git remote add origin git@github.com:XUranus/learngit.git</code>意思是：远程库的名字就是<code>origin</code>，这是Git默认的叫法。</p>
<blockquote>
<p>Git支持多种协议，包括https，但ssh协议速度最快。某些公司会封22端口，不得不用https</p>
</blockquote>
<p><code>git push -u origin master</code>是把本地库的内容推送到远程，用<code>git push</code>命令，实际上是把当前分支<code>master</code>推送到远程。</p>
<blockquote>
<p>注意！由于2020年BLM运动，GitHub初始化仓库页用<code>git branch -M main</code>把<code>master</code>分支重命名为<code>main</code>，Git本地工具的默认分支依旧是<code>master</code></p>
</blockquote>
<p>由于远程库是空的，我们第一次推送<code>master</code>分支时，加上了<code>-u</code>参数，Git不但会把本地的<code>master</code>分支内容推送的远程新的<code>master</code>分支，还会把本地的<code>master</code>分支和远程的<code>master</code>分支关联起来，在以后的推送或者拉取时就可以简化命令。之后，只要本地作了提交，就可以通过命令<code>git push origin master</code>上传到远程仓库。</p>
<h2 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h2><p>分支可以方便协调多人合作，备份未完成的代码而不影响他人。</p>
<h3 id="创建分支与合并分支"><a href="#创建分支与合并分支" class="headerlink" title="创建分支与合并分支"></a>创建分支与合并分支</h3><p>一开始的时候，<code>master</code>分支是一条线，Git用<code>master</code>指向最新的提交，再用<code>HEAD</code>指向<code>master</code>，就能确定当前分支，以及当前分支的提交点：<br><img src="Screenshot_20201027_144711.png" alt=""><br>每次提交一个commit，<code>master</code>和<code>HEAD</code>就会前进一个节点，<code>master</code>分支会越来越长。</p>
<p>使用<code>git checkout -b dev</code>创建一个新的分支(或者<code>git branch dev &amp; git checkout dev</code>)，并在上面开发新功能。Git新建了一个指针叫<code>dev</code>，指向<code>master</code>相同的提交，再把<code>HEAD</code>指向<code>dev</code>，就表示当前分支在<code>dev</code>上：<br><img src="Screenshot_20201027_154912.png" alt=""></p>
<p>创建新分支实质上就是创建一个新的指针<code>dev</code>指向当前提交，再把<code>HEAD</code>指向<code>dev</code>,不设计其他文件的变化，所以可以瞬间完成。</p>
<p>从现在开始，后续的修改和提交就不再针对<code>master</code>分支了，而是<code>dev</code>分支。每当commit一次<code>dev</code>就向前一步，而<code>master</code>不变。<br><img src="Screenshot_20201027_160029.png" alt=""></p>
<p>假如我们在<code>dev</code>上的工作完成了，就可以把<code>dev</code>合并到<code>master</code>上。直接把<code>master</code>指向<code>dev</code>的当前提交，就完成了合并，所以Git分支合并也很快。<br><img src="Screenshot_20201027_160207.png" alt=""></p>
<p>合并完分支后，可以删除<code>dev</code>分支。删除<code>dev</code>分支就是把<code>dev</code>指针给删掉，删掉后，我们就剩下了一条<code>master</code>分支：<br><img src="Screenshot_20201027_160410.png" alt=""></p>
<p>总结一下这个过程：</p>
<ul>
<li><p><code>git checkout -b dev</code>切换到<code>dev</code>分支。<code>-b</code>参数表示创建分支并切换，等效于这两条命令：<br><code>git branch dev</code><br><code>git checkout dev</code></p>
</li>
<li><p>用<code>git branch</code>查看当前的分支，已经切换到了<code>dev</code><br><img src="Screenshot_20201103_204649.png" alt=""></p>
</li>
<li><p>做一点修改：<code>echo &quot;creating a new branch is quick.&quot; &gt;&gt; README.md</code>，然后提交：<br><code>git add README.md</code><br><code>git commit -m &quot;switch to new branch dev&quot;</code><br>这次提交就是在<code>dev</code>上往后创建一个节点了。</p>
</li>
</ul>
<p>当我们在<code>dev</code>上完成了开发，想把<code>master</code>同步到<code>dev</code>,用<code>git checkout master</code>回到<code>master</code>，状态如下：<br><img src="Screenshot_20201103_204051.png" alt=""></p>
<p>此时查看刚才修改的<code>README.md</code>可以看到添加的内容不见了，那个添加位于<code>dev</code>分支。<code>dev</code>分支领先<code>master</code>一次提交，我们吧<code>dev</code>的更改合并到<code>master</code>上:<code>git merge dev</code><br><img src="Screenshot_20201103_204954.png" alt=""><br><code>git merge</code>命令用于合并指定分支到当前分支。合并后，再查看<code>README.md</code>的内容，就可以看到，和<code>dev</code>分支的最新提交是完全一样的。</p>
<p>合并完成后，就可以放心地删除<code>dev</code>分支了：<code>git branch -d dev</code>,此时使用<code>git branch</code>再次只能看到<code>master</code>分支了。</p>
<blockquote>
<ul>
<li><p>上述合并过程的<code>Fast-forward</code>信息告诉我们，这次合并是“快进模式”，也就是直接把<code>master</code>指向<code>dev</code>的当前提交，所以合并速度非常快。因为创建、合并和删除分支非常快，所以Git鼓励你使用分支完成某个任务，合并后再删掉分支，这和直接在<code>master</code>分支上工作效果是一样的，但过程更安全。</p>
</li>
<li><p><code>git checkout</code>既可以撤销修改，也可以切换分支。为了避免误解，新版Git提供<code>git switch -c &lt;branch&gt;</code>来创建并切换分支，用<code>git switch &lt;branch&gt;</code>切换到已有的分支。</p>
</li>
</ul>
</blockquote>
<p>扩展知识：</p>
<blockquote>
<ul>
<li><code>git branch</code>用于查看本地分支，<code>git branch -r</code>可以用于查看远程分支，<code>git branch -a</code>用于查看本地和远程的全部分支</li>
<li><code>git branch -d -r &lt;branchname&gt;</code> + <code>git push</code>用于删除远程分支</li>
<li>Windows上Git分支名称大小写不敏感，应规避用大小写区分分支</li>
</ul>
</blockquote>
<h3 id="分支管理策略"><a href="#分支管理策略" class="headerlink" title="分支管理策略"></a>分支管理策略</h3><p>通常，合并分支时，如果可能，Git会用Fast forward模式，但这种模式下，删除分支后，会丢掉分支信息。如果要强制禁用Fast forward模式，Git就会在merge时生成一个新的commit，这样，从分支历史上就可以看出分支信息。</p>
<p>假设之前的例子使用<code>-no-off</code>的普通方式合并分支：<br><code>git merge --no-ff -m &quot;merge with no-ff&quot; dev</code><br>merge之后的历史有分支，能看出来做过合并，就像这样：<br><img src="Screenshot_20201103_220940.png" alt=""></p>
<p>日常的开发中应遵循如下的分支管理原则：</p>
<ul>
<li><code>master</code>分支应该是非常稳定的，也就是仅用来发布新版本，不能在上面干活</li>
<li>干活都在<code>dev</code>分支上。<code>dev</code>分支是不稳定的。到一个版本发布时，把dev分支合并到<code>master</code>上，在<code>master</code>分支发布这个版本</li>
<li>每个人都在<code>dev</code>分支上干活，每个人都有自己的分支，时不时地往<code>dev</code>分支上合并</li>
<li>团队协作的分支看起来类似这样：<br><img src="Screenshot_20201103_221403.png" alt=""></li>
</ul>
<h3 id="解决冲突"><a href="#解决冲突" class="headerlink" title="解决冲突"></a>解决冲突</h3><p>当两个分支同时修改，就有可能产生冲突。</p>
<p>比如在<code>master</code>下创建一个新分支<code>feature1</code>。切换过去，加上一行：<br><code>git switch -c feature1</code><br><code>echo &quot;YOU MAY NEED TO FIX CONFLICTS BEFORE MERGE.&quot; &gt;&gt; README.md</code><br><code>git add README.md</code><br><code>git commit -m &quot;need to fix conflict&quot;</code><br>然后切换回<code>master</code>,并做修改：<br><code>git switch master</code><br><code>echo &quot;You may need to fix conflicts before merge.&quot; &gt;&gt; README.md</code><br><code>git add README.md</code><br><code>git commit -m &quot;need to fix conflict&quot;</code></p>
<p>此时状态如下图所示：<br><img src="Screenshot_20201103_210113.png" alt=""></p>
<p>在<code>master</code>上<code>git merge feature1</code>,看到冲突提示：<br><img src="Screenshot_20201103_212445.png" alt=""><br>查看<code>README.md</code>，可以看到冲突已经被标出<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Learn Git</span><br><span class="line">I&#x27;m writing this README.md to learn Git.</span><br><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software distributed under the GPL.</span><br><span class="line">Git has a stage zone</span><br><span class="line">creating a new branch is quick.</span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">You may need to fix conflicts before merge.</span><br><span class="line">=======</span><br><span class="line">YOU MAY NEED TO FIX CONFLICTS BEFORE MERGE.</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature1</span><br></pre></td></tr></table></figure><br>此时用<code>git status</code>可以看到可选的操作，可以放弃merge,也可以手动解决冲突。<br>这里选择保留<code>master</code>上的更改（可以使用vscode的插件），解决完冲突后，<code>README.md</code>如下：<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Learn Git</span><br><span class="line">I&#x27;m writing this README.md to learn Git.</span><br><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software distributed under the GPL.</span><br><span class="line">Git has a stage zone</span><br><span class="line">creating a new branch is quick.</span><br><span class="line">You may need to fix conflicts before merge.</span><br></pre></td></tr></table></figure><br>重新提交：<br><code>git add README.md</code><br><code>git commit -m &quot;fix conflict&quot;</code><br>merge完成。用<code>git log --graph</code>命令可以看到分支合并图。<br><img src="Screenshot_20201103_213203.png" alt=""></p>
<h3 id="修复Bug与新建feature"><a href="#修复Bug与新建feature" class="headerlink" title="修复Bug与新建feature"></a>修复Bug与新建feature</h3><p>工作在<code>dev</code>分支时，接到一个<code>issue-251</code>的Bug Report，创建一个<code>issue-251</code>的临时分支来修复bug，当修复完毕后，再删除临时分支。</p>
<p>但是此时<code>dev</code>上的工作做到一半，<code>git status</code>可以看到文件被修改还没提交:<br><img src="Screenshot_20201104_210806.png" alt=""><br>此时切换分支会提示报错，要求放弃本地修改，或者commit。Git提供了一个功能叫<code>stash</code>，用于把工作暂存起来。<code>git stash</code>之后再<code>git status</code>，工作区就是干净的了:<br><img src="Screenshot_20201104_210852.png" alt=""></p>
<p>此时就可以着手修复Bug了，接下来的的工作流程如下:</p>
<ul>
<li>假设要去<code>master</code>上修复Bug：<code>git switch master</code></li>
<li>创建一个<code>issue-251</code>分支：<code>git switch -c issue-251</code></li>
<li>修复完后提交<code>git commit -m &quot;fix bug issue-251&quot;</code></li>
<li>切换回<code>master</code>分支：<code>git switch master</code></li>
<li>完成合并：<code>git merge --no-ff -m &quot;merge bug fix 251&quot; issue-251</code></li>
<li>修复完Bug，切换回<code>dev</code>分支继续干活：<code>git switch dev</code>，并删除临时分支：<code>git branch -d issue-251</code></li>
</ul>
<p>此时<code>git status</code>查看工作区还是干净的。使用<code>git stash list</code>查看暂存的工作:<br><img src="Screenshot_20201104_211035.png" alt=""></p>
<p>要恢复现场，有两种办法：</p>
<ol>
<li><code>git stash apply</code>恢复，但不会删除stash的内容，需要再用<code>git stash drop</code>来删除。</li>
<li><code>git stash pop</code>恢复现场且删除暂存的内容。</li>
</ol>
<p>此时再用<code>git stash list</code>就看不到任何stash内容了。此时<code>git status</code>又可以看到文件被修改的提示了。<br><img src="Screenshot_20201104_211151.png" alt=""></p>
<p>刚才在<code>master</code>分支修复了Bug，但是<code>dev</code>分支早期也是从<code>master</code>上派生过来的，所以这个Bug在当前<code>dev</code>分支上也是存在的。如果在<code>dev</code>上再次修复一次Bug，<code>dev</code>去merge整个<code>master</code>就太繁琐了。为了方便操作，Git专门提供了一个<code>cherry-pick</code>命令，让我们能复制一个特定的提交到当前分支。假设刚才提交的commit id是<code>4c805e2</code>，用<code>git cherry-pick 4c805e2</code>就可以把单个修改Bug的commit复制到<code>dev</code>上来。</p>
<p>开发一个新feature，最好也新建一个分支如<code>feature-101</code>，在上面开发，完成后去<code>dev</code>或者<code>master</code>上merge。</p>
<p>如果一个功能开发到一半就被要求取消，即一个<code>feature</code>分支被创建后却没有被合并，此时该分支是无法删除的。 如果要丢弃一个没有被合并过的分支，可以通过<code>git branch -D &lt;branch&gt;</code>强行删除。</p>
<p>知识点：</p>
<blockquote>
<p>Git每次的新提交和修改都是创建新的commit节点：例如用<code>git commit --amend</code>修改上一次commit的message，亦或是用<code>git cherry-pick &lt;commit id&gt;</code>合并指定commit，都会创建一个新的commit节点并拥有新的独一无二的commit id。</p>
</blockquote>
<h3 id="多人合作"><a href="#多人合作" class="headerlink" title="多人合作"></a>多人合作</h3><ol>
<li>用<code>git push origin &lt;branch-name&gt;</code>推送自己的修改</li>
<li>如果推送失败，则因为远程分支比你的本地更新，需要先用<code>git pull</code>试图合并</li>
<li>如果合并有冲突，则解决冲突，并在本地提交</li>
<li>没有冲突或者解决掉冲突后，再用<code>git push origin &lt;branch-name&gt;</code>推送</li>
</ol>
<blockquote>
<p>如果<code>git pull</code>提示<code>no tracking information</code>，则说明本地分支和远程分支的链接关系没有创建，用命令<code>git branch --set-upstream-to &lt;branch-name&gt; origin/&lt;branch-name&gt;</code>。</p>
</blockquote>
<p>不是一定要把本地分支往远程推送:</p>
<ul>
<li><code>master</code>分支是主分支，<code>dev</code>分支是开发分支，团队所有成员都需要在上面工作，需要与远程同步</li>
<li><code>bug</code>分支只用于在本地修复bug，没必要推到远程</li>
<li><code>feature</code>分支是否推到远程，取决于你是否和你的小伙伴合作在上面开发</li>
</ul>
<blockquote>
<p>本地新建的分支如果不推送到远程，对其他人就是不可见的；</p>
</blockquote>
<p>GitHub上clone下来的内本地容默认只看得到<code>master</code>分支（可以用<code>git remote -v</code>查看本地关联的远程库信息。要在在本地创建和远程分支对应的分支，使用<code>git switch -c &lt;branch-name&gt; origin/&lt;branch-name&gt;</code>（本地和远程分支的名称最好一致）</p>
<p>把<code>master</code>分支推送给远程仓库：<code>git push origin master</code>。同理，把<code>dev</code>推送给远程仓库：<code>git push origin dev</code></p>
<blockquote>
<p><code>git pull</code>会自动拉去当前分支远端最新的代码<strong>并自动合并</strong>，如果出现大规模的冲突则会很麻烦。如果追求安全可控最好使用<code>git fetch</code>，<code>git pull</code>实际上做的事等于<code>git fetch &amp;&amp; git merge</code>，<code>git pull</code>会自动合并创建一个新的commit节点，而<code>git fetch</code>只是拉取远端最新代码到本地，需要自己<code>merge</code>。详见<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/38305012">git pull 和 git fetch的区别</a></p>
</blockquote>
<h3 id="Rebase"><a href="#Rebase" class="headerlink" title="Rebase"></a>Rebase</h3><p>Git Rebase详见这篇讲解：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/6960811ac89c">你真的懂git rebase吗？</a></p>
<p><code>git merge</code>操作合并分支会让两个分支的每一次提交都按照commit时间（并不是push时间）排序，并且会将两个分支的最新一次commit点进行合并成一个新的commit，最终的分支树呈现非整条线性直线的形式。</p>
<p><code>git rebase</code>操作实际上是将当前执行rebase分支的所有基于原分支提交点之后的commit打散成一个一个的patch，并重新生成一个新的commit hash值，再次基于原分支目前最新的commit点上进行提交，并不根据两个分支上实际的每次提交的时间点排序，rebase完成后，切到基分支进行合并另一个分支时也不会生成一个新的commit点，可以保持整个分支树的完美线性。</p>
<p>当我们开发一个功能时，可能会在本地有无数次commit，而你实际上在你的<code>master</code>分支上只想显示每一个功能测试完成后的一次完整提交记录就好了，其他的提交记录并不想将来全部保留在你的<code>master</code>分支上，那么rebase将会是一个好的选择，他可以在rebase时将本地多次的commit合并成一个commit，还可以修改commit的描述等。</p>
<h2 id="标签管理"><a href="#标签管理" class="headerlink" title="标签管理"></a>标签管理</h2><p>每个commit可以看成是一个版本，有一个唯一的commit id，如果和他人交流提供版本号，用一长串hash码是很不方便的，所以Git提供了Tag的功能，Tag可以是类似”v1.0”,”v2.0”的版本号，他看成是commit id的别称。</p>
<p>使用<code>git tag &lt;tagname&gt;</code>可以给<code>HEAD</code>指向的commit打上Tag<br><code>git tag -a &lt;tagname&gt; -m &lt;tag message&gt; &lt;commit id&gt;</code>可以给指定commit id添加Tag和Tag的描述信息，<code>-m</code>为可选项目<br><code>git tag</code>查看所有的Tag<br><code>git tag -d &lt;tagname&gt;</code>删除某个Tag<br><code>git show &lt;tagname&gt;</code>看某个Tag的详细信息<br><code>git push origin &lt;tagname&gt;</code>推送Tag到远程</p>
<h2 id="多个远程仓库"><a href="#多个远程仓库" class="headerlink" title="多个远程仓库"></a>多个远程仓库</h2><p>一个本地仓库可以关联不止一个远程仓库，所以可以同时推送项目到GitHub和Gitee。<br>首先<code>git remote</code>查看关联的远程仓库：<br><img src="Screenshot_20201027_132928.png" alt=""><br>然后<code>git remote rm origin</code>删除<code>origin</code>远程库，在Gitee创建项目并关联：<code>git remote add gitee git@gitee.com:XUranus/learngit.git</code>,重新关联GitHub：<code>git remote add github git@github.com:XUranus/learngit.git</code>。</p>
<p>此时<code>git origin -v</code>就可以看到两个远程库了，当要同时推送给两个远程库时，只需要：<br><code>git push github master</code><br><code>git push gitee origin</code></p>
<h2 id="Pull-Request"><a href="#Pull-Request" class="headerlink" title="Pull Request"></a>Pull Request</h2><p>如果要给某个开源项目贡献代码，需要先fork到自己的repo里，然后修改后commit到<strong>自己的</strong>repo里，最后pull request等待项目所有者merge</p>
<h2 id="自定义与配置别名"><a href="#自定义与配置别名" class="headerlink" title="自定义与配置别名"></a>自定义与配置别名</h2><ol>
<li><p>安装后初次使用需要配置用户名邮箱：<br><code>git config --global user.name &quot;your name</code><br><code>git config --global user.email &quot;email@example.com</code></p>
</li>
<li><p>优化高亮显示<br><code>git config --global color.ui true</code></p>
<blockquote>
<p>建议配置oh-my-zsh获得最佳体验</p>
</blockquote>
</li>
<li><p><code>git config --global alias.unstage &#39;reset HEAD&#39;</code><br>配置后撤销stage直接用<code>git unstage README.md</code>即可</p>
</li>
<li><p><code>git config --global alias.lg &quot;log --color --graph --pretty=format:&#39;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#39; --abbrev-commit&quot;</code><br>配置后使用<code>git lg</code>可以高亮查看分支信息</p>
</li>
</ol>
<p>本地库的配置文件位于<code>.git/config</code>，带有<code>--global</code>的为全局配置，位于<code>~/.gitconfig</code>中</p>
<h2 id="gitignore"><a href="#gitignore" class="headerlink" title=".gitignore"></a>.gitignore</h2><p>时候和开发时项目目录下会产生<code>class</code>文件，链接文件，依赖，配置信息。如果不想这些被添加进库中，可以在项目根目录处配置<code>.gitignore</code>文件。</p>
<p>Github提供的<code>.gitignore</code>配置文件<a target="_blank" rel="noopener" href="https://github.com/github/gitignore">https://github.com/github/gitignore</a></p>
<h2 id="Git-LFS"><a href="#Git-LFS" class="headerlink" title="Git LFS"></a>Git LFS</h2><p>Git一般只用于跟踪文本文件的变化，如果遇到一些需要跟踪二进制大文件的变化的场景（如二进制模型文件）则需要安装<a target="_blank" rel="noopener" href="https://git-lfs.github.com/">Git LFS(git Large File Storage)</a>插件。</p>
<ul>
<li>安装Git LFS：<code>sudo pacman -S git-lfs</code></li>
<li>启动Git LFS：<code>git lfs install</code></li>
<li>使用Git LFS跟踪二进制文件：<code>git lfs track &lt;file&gt;</code></li>
<li>查看Git LFS跟踪的文件：<code>git lfs ls-files</code></li>
</ul>
<blockquote>
<p>Git LFS不是通用功能，请先确定你的Git服务提供者是否已经开启了LFS，如果没有开始则无法将LFS跟踪的文件提交上去。</p>
</blockquote>
<h2 id="git-fsck"><a href="#git-fsck" class="headerlink" title="git fsck"></a>git fsck</h2><p>如果文件已经被add到暂存区，文件因为一些操作丢失，如：没有commit就<code>git reset --hard HEAD</code>，此时存在将丢失的文件找回的方法。 </p>
<p>被暂存后，此时文件就已被索引了。此时使用<code>git fsck --lost-found</code>可以列出所有悬空的文件索引：<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Checking object directories: 100% (256/256), done.</span><br><span class="line">Checking objects: 100% (581/581), done.</span><br><span class="line">dangling blob 45b25090bd796b456169460740e4baef2577e17e</span><br><span class="line">dangling blob 14141e7e5e734425b625b3a4662cb56a3b5fecd8</span><br><span class="line">dangling commit cbe575e408f1c9a1a8721c61d9c0c15003c25caf</span><br><span class="line">dangling commit e69643f87dc45747be44b92f01a6f5bcd4403c66</span><br></pre></td></tr></table></figure><br>其中blob类型的就是丢失的文件，后面跟文件的hash。可以用<code>git show &lt;hash&gt;</code>来查看一个丢失的未commit的文件的内容，使用<code>git merge &lt;hash&gt;</code>来恢复该文件。</p>
<h2 id="其他注意点"><a href="#其他注意点" class="headerlink" title="其他注意点"></a>其他注意点</h2><ul>
<li>建议使用UTF-8编码，避免平台冲突</li>
</ul>
<h2 id="相关资料"><a href="#相关资料" class="headerlink" title="相关资料"></a>相关资料</h2><p><a target="_blank" rel="noopener" href="https://git-scm.com/">Git官网</a><br><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2">Git官方教程 GitBook</a><br><a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/896043488029600">廖雪峰的Git教程（新手强烈推荐！）</a><br><a target="_blank" rel="noopener" href="https://gitee.com/liaoxuefeng/learn-java/raw/master/teach/git-cheatsheet.pdf">Git基本命令查阅表</a><br><a target="_blank" rel="noopener" href="https://learngitbranching.js.org/?locale=zh_CN">学习Git分支的游戏</a><br><a target="_blank" rel="noopener" href="https://github.blog/2018-04-19-introducing-github-learning-lab/">GitHub官方教程</a><br><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzAxOTcxNTIwNQ==&amp;mid=2457919169&amp;idx=2&amp;sn=7514209811adbd09b6161093e8ae3eb4&amp;chksm=8cb6bb2bbbc1323dc0cd1c9110fcc6a2a06774040586fc21a01db98129a03ece8ee4cdb73960&amp;scene=21#wechat_redirect">图解Git命令</a><br><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzAxOTcxNTIwNQ==&amp;mid=2457915558&amp;idx=1&amp;sn=de0cdcb9fb199162ffe565e371b3dbf4&amp;scene=21#wechat_redirect">用好这几个工具，能大幅提升你的 Git/GitHub 操作效率！</a><br><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzAxOTcxNTIwNQ==&amp;mid=2457914802&amp;idx=1&amp;sn=a8d2cb9b626da84d94d8b2ebd9e85c24&amp;scene=21#wechat_redirect">收好这份 Git 命令应急手册，关键时刻可保你一命</a></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Git/" rel="tag"># Git</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2017/10/08/Linux%E4%B8%8BApache%E7%BD%91%E7%AB%99%E7%9B%AE%E5%BD%95%E8%AF%BB%E5%86%99%E6%9D%83%E9%99%90%E7%9A%84%E8%AE%BE%E7%BD%AE/" rel="prev" title="Linux下Apache网站目录读写权限的设置">
      <i class="fa fa-chevron-left"></i> Linux下Apache网站目录读写权限的设置
    </a></div>
      <div class="post-nav-item">
    <a href="/2017/10/12/ss%E5%8D%87%E7%BA%A7ssr/" rel="next" title="ss升级ssr">
      ss升级ssr <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <div>
        <blockquote><b>Disqus评论区没有正常加载，请使用科学上网</b></blockquote>
      </div>
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="nav-number">1.</span> <span class="nav-text">安装与配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85Git"><span class="nav-number">1.1.</span> <span class="nav-text">安装Git</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE"><span class="nav-number">1.2.</span> <span class="nav-text">配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%89%88%E6%9C%AC%E5%BA%93"><span class="nav-number">2.</span> <span class="nav-text">创建版本库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6"><span class="nav-number">3.</span> <span class="nav-text">版本控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%9E%E9%80%80%E5%88%B0%E4%B8%8A%E4%B8%80%E4%B8%AA%E7%89%88%E6%9C%AC"><span class="nav-number">3.1.</span> <span class="nav-text">回退到上一个版本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%92%A4%E9%94%80%E5%88%B0%E6%9C%AA%E6%9D%A5%E7%9A%84%E7%89%88%E6%9C%AC"><span class="nav-number">3.2.</span> <span class="nav-text">撤销到未来的版本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AF%94%E8%BE%83%E6%96%87%E4%BB%B6%E5%8C%BA%E5%88%AB"><span class="nav-number">3.3.</span> <span class="nav-text">比较文件区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A5%E4%BD%9C%E5%8C%BA%E4%B8%8E%E6%9A%82%E5%AD%98%E5%8C%BA"><span class="nav-number">3.4.</span> <span class="nav-text">工作区与暂存区</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%92%A4%E9%94%80%E4%BF%AE%E6%94%B9"><span class="nav-number">3.5.</span> <span class="nav-text">撤销修改</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6"><span class="nav-number">3.6.</span> <span class="nav-text">删除文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="nav-number">4.</span> <span class="nav-text">远程仓库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9C%E7%A8%8B%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E9%A1%B9%E7%9B%AE"><span class="nav-number">4.1.</span> <span class="nav-text">远程创建一个新的项目</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E6%9C%AC%E5%9C%B0%E9%A1%B9%E7%9B%AE%E6%B7%BB%E5%8A%A0%E8%BF%9C%E7%A8%8B%E5%BA%93"><span class="nav-number">4.2.</span> <span class="nav-text">为本地项目添加远程库</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86"><span class="nav-number">5.</span> <span class="nav-text">分支管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%88%86%E6%94%AF%E4%B8%8E%E5%90%88%E5%B9%B6%E5%88%86%E6%94%AF"><span class="nav-number">5.1.</span> <span class="nav-text">创建分支与合并分支</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5"><span class="nav-number">5.2.</span> <span class="nav-text">分支管理策略</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%86%B2%E7%AA%81"><span class="nav-number">5.3.</span> <span class="nav-text">解决冲突</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E5%A4%8DBug%E4%B8%8E%E6%96%B0%E5%BB%BAfeature"><span class="nav-number">5.4.</span> <span class="nav-text">修复Bug与新建feature</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E4%BA%BA%E5%90%88%E4%BD%9C"><span class="nav-number">5.5.</span> <span class="nav-text">多人合作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rebase"><span class="nav-number">5.6.</span> <span class="nav-text">Rebase</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%87%E7%AD%BE%E7%AE%A1%E7%90%86"><span class="nav-number">6.</span> <span class="nav-text">标签管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E4%B8%AA%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="nav-number">7.</span> <span class="nav-text">多个远程仓库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pull-Request"><span class="nav-number">8.</span> <span class="nav-text">Pull Request</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%8E%E9%85%8D%E7%BD%AE%E5%88%AB%E5%90%8D"><span class="nav-number">9.</span> <span class="nav-text">自定义与配置别名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#gitignore"><span class="nav-number">10.</span> <span class="nav-text">.gitignore</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Git-LFS"><span class="nav-number">11.</span> <span class="nav-text">Git LFS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-fsck"><span class="nav-number">12.</span> <span class="nav-text">git fsck</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="nav-number">13.</span> <span class="nav-text">其他注意点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99"><span class="nav-number">14.</span> <span class="nav-text">相关资料</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="XUranus"
      src="/assets/march72.jpg">
  <p class="site-author-name" itemprop="name">XUranus</p>
  <div class="site-description" itemprop="description">Blog of XUranus</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
        
          <span class="site-state-item-count">125</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags">
          
        <span class="site-state-item-count">56</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2017 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">XUranus</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">500k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">7:35</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/three-waves.min.js"></script>


  




  
<script src="/js/local-search.js"></script>











<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://XUranus.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "http://xuranus.github.io/2017/10/09/Git%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/";
    this.page.identifier = "2017/10/09/Git使用入门/";
    this.page.title = "Git使用入门";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://XUranus.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>


  <div id="chat_input">
    <input id="question" type="text" placeholder="陪我聊聊天吧" onkeypress="return onKeyPress(event)"/>
</div>

<style> 
#chat_input{
    width: 200px;
    height: 40px;
    position: fixed;
    bottom: 5px;
    left: 50px;
} 

#question{
    border: none;/*取消输入框边框*/
    border-bottom: 1px #aaaaaa solid;/*设置下边框*/
    background-color: transparent;/*背景透明*/
    padding: 5px;
}

/*手机端不显示*/
@media screen and (max-width: 480px) {
    #chat_input{
        display: none;
    }
    #live2d-widget{
        display: none;
    }
}
</style>

<script>
function onKeyPress(e){ //在聊天框按下回车事件处理

  function popDialogAndShow(message) { //显示对话框
    let live2d_dialog = document.getElementsByClassName("live2d-widget-dialog")[0]  //获取对话框
    live2d_dialog.style.opacity=1 //显示对话框
    live2d_dialog.innerHTML = message 
    window.setTimeout(()=>{ live2d_dialog.style.opacity = 0 }, 10000) //10秒后隐藏对话框 
  }

  var keyCode = null;
  if(e.which) {
      keyCode = e.which;
  } else if(e.keyCode) {
      keyCode = e.keyCode;
  }

  if(keyCode == 13) { //如果按下回车
      var question_box = document.getElementById('question') // 获取输入框中的问题
      var question = question_box.value
      question_box.value = "" //清空输入框内容并禁用输入框
      question_box.setAttribute("disabled","disabled")
      var api_key = "f9ead0aad301411392637cc46708c5cd" //图灵机器人KEY,需要申请
      var url = 'https://www.tuling123.com/openapi/api?key='+api_key+'&info='+encodeURIComponent(question)

      var xhr = new XMLHttpRequest()   // 通过XHR发送一个GET请求
      xhr.onreadystatechange = ()=>{
        question_box.removeAttribute('disabled');
        if(xhr.readyState === 4) {
          if (xhr.status === 200) {
            var responseJSON = eval('('+ xhr.responseText +')') //反序列化返回的JSON
            let message = (responseJSON['code'] == 100000 ? responseJSON['text']: '今日对话次数已用完')
            popDialogAndShow(message)
          } else {
            console.error(xhr.statusText);
            popDialogAndShow('网络错误：'+xhr.statusText)
          }
        }
      };

      xhr.onerror = (e)=> {
        console.error(xhr.statusText);
        popDialogAndShow('网络错误：'+xhr.statusText)
      };

      xhr.open('GET',url)
      xhr.send()
  }
}
</script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/umaru.model.json"},"display":{"position":"left","width":200,"height":400,"hOffset":20,"vOffset":30},"mobile":{"show":true,"scale":0.5},"rect":{"opacity":0.7},"dialog":{"enable":true,"hitokoto":true},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
